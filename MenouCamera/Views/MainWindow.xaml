<Window x:Class="MenouCamera.Views.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Menou Camera" Height="720" Width="1080"
        WindowStartupLocation="CenterScreen">
    <DockPanel>

        <!-- 上部の操作バー -->
        <StackPanel DockPanel.Dock="Top" Orientation="Horizontal" Margin="8" >
            <Button Content="撮像" Command="{Binding CaptureCommand}" Margin="0,0,8,0" Padding="12,6"/>
            <Button Content="保存" Command="{Binding SaveCommand}" Padding="12,6"/>
        </StackPanel>

        <!-- 本体 -->
        <Grid Margin="8">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="2*"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <!-- プレビュー -->
            <Border Grid.Column="0" BorderBrush="#DDD" BorderThickness="1" CornerRadius="4" Padding="6" Margin="0,0,8,0">
                <ScrollViewer HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Auto">
                    <Image Source="{Binding Selected.FullImage}" Stretch="Uniform" />
                </ScrollViewer>
            </Border>

            <!-- 履歴（新しい順に先頭へ Insert される） -->
            <Border Grid.Column="1" BorderBrush="#DDD" BorderThickness="1" CornerRadius="4" Padding="4">
                <ListBox ItemsSource="{Binding History}"
                         SelectedItem="{Binding Selected}"
                         ScrollViewer.VerticalScrollBarVisibility="Auto">
                    <ListBox.ItemTemplate>
                        <DataTemplate>
                            <StackPanel Orientation="Horizontal" Margin="4">
                                <Image Source="{Binding Thumbnail}" Width="96" Height="72" Stretch="UniformToFill" Margin="0,0,8,0"/>
                                <StackPanel>
                                    <TextBlock Text="{Binding Title}" FontWeight="Bold" />
                                    <TextBlock Text="{Binding CapturedAtText}" Foreground="#666" />
                                </StackPanel>
                            </StackPanel>
                        </DataTemplate>
                    </ListBox.ItemTemplate>
                </ListBox>
            </Border>
        </Grid>

    </DockPanel>
</Window>
